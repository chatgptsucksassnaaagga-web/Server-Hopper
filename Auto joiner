local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")

local request =
    (syn and syn.request) or
    (http and http.request) or
    request

local RELAY_URL = "http://localhost:3000/submit"

-- example brainrot scanner (replace with your real one)
local function getAllBrainrots()
    return {
        {Name = "Example Brainrot", MPS = 12000000}
    }
end

local function sendToRelay(brainrots)
    if #brainrots == 0 then return end
    local best = brainrots[1]

    request({
        Url = RELAY_URL,
        Method = "POST",
        Headers = {["Content-Type"] = "application/json"},
        Body = HttpService:JSONEncode({
            placeId = game.PlaceId,
            jobId = game.JobId,
            bestBrainrot = best.Name,
            mps = best.MPS,
            players = #Players:GetPlayers(),
            maxPlayers = Players.MaxPlayers
        })
    })
end

-- run once (or inside your hop loop)
local brainrots = getAllBrainrots()
sendToRelay(brainrots)
